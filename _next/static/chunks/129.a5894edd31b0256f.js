"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{83129:function(t,n,e){e.r(n),e.d(n,{default:function(){return x}});var o=e(28520),r=e.n(o),a=e(85893),i=e(67294),c={gaodeWhite:{urlTemplate:"https://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",subdomains:[1,2,3,4]},gaodeWxt:{urlTemplate:"https://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",subdomains:[1,2,3,4]},gaodeRoad:{urlTemplate:"https://webst0{s}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}",subdomains:[1,2,3,4]}},u=e(25770),l=e(11011),s=e(84486),d=e.n(s),p=e(97522),y=e.n(p);function f(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],o=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(e.push(i.value),!n||e.length!==n);o=!0);}catch(u){r=!0,a=u}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(t,n){var e=f(y().wgs84togcj02(t,n),2);return{lng:e[0],lat:e[1]}}var g=e(15531),v=e(48764).Buffer;function h(t,n,e,o,r,a,i){try{var c=t[a](i),u=c.value}catch(l){return void e(l)}c.done?n(u):Promise.resolve(u).then(o,r)}function b(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function w(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),o.forEach((function(n){b(t,n,e[n])}))}return t}var x=function(){var t,n=(0,i.useRef)(),e=function(t,n,e){var o,r=new v(t.geometry,"hex"),a=l.Geometry.parse(r).toGeoJSON(),i={zIndex:1,visible:!1,editable:!0,cursor:"pointer",shadowBlur:0,shadowColor:"black",draggable:!1,dragShadow:!1,drawOnAxis:null,symbol:{textLineSpacing:10,lineColor:"rgba(128,128,128,1)",lineWidth:1,polygonFill:"rgba(169,169,169, 0.3)",polygonOpacity:1}};"Polygon"===(a=function(t){var n=t.coordinates,e=t.type,o=[];return"MultiPolygon"===e?d()(n,(function(t){var n=[];d()(t,(function(t){var e=[];d()(t,(function(t){var n=m(t[0],t[1]);e.push([n.lng,n.lat])})),n.push(e)})),o.push(n)})):"Polygon"===e&&d()(n,(function(t){var n=[];d()(t,(function(t){var e=m(t[0],t[1]);n.push([e.lng,e.lat])})),o.push(n)})),{type:e,coordinates:o}}(a)).type&&(o=new u.mg(a.coordinates,i)),"MultiPolygon"===a.type&&(o=new u.Kk(a.coordinates,i)),o.addTo(n).bringToFront();var c=m(t.lng,t.lat),s=c.lng,p=c.lat,y=new u.Jx([s,p],{visible:!0,symbol:[{markerType:"ellipse",markerWidth:100,markerHeight:100,markerFill:"#4775D5",textFaceName:"DIN",markerLineColor:"#4775D5",textName:"{name}",textFill:"white",textWeight:"bold",zIndex:"1007",textSize:{stops:[[5,13],[8,14],[10,13]]}}],properties:{name:"".concat(t.name,"\n\n").concat(t["\u9879\u76ee\u6570\u91cf"]," \u697c\u76d8\n").concat(t["\u571f\u5730\u6570\u91cf"]," \u571f\u5730")}});if(y.on("mouseenter",(function(){o.show()})),y.on("mouseout",(function(){o.hide()})),"\u533a\u57df"===(null===t||void 0===t?void 0:t.type)&&(null===t||void 0===t?void 0:t.cityLng)&&(null===t||void 0===t?void 0:t.cityLat)){var f=m(t.cityLng,t.cityLat),g=f.lng,h=f.lat;y.on("click",(function(){e.setCenterAndZoom([g,h],8)}))}y.addTo(n).bringToFront()};(0,i.useEffect)((function(){return s(),function(){t.remove()}}),[]);var o,s=(o=r().mark((function o(){var a,i,l,s,d,p,y,f,m,v,h,b,x,_,j,k,z;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=new u.D5(n.current,{center:[113.270766,23.135618],zoom:5,baseLayer:new u.Im("baseLayer",c.gaodeWhite),maxZoom:10,minZoom:4,attribution:!1,scaleControl:!1,dragRotate:!1,dragPitch:!1,touchRotate:!1,seamlessZoom:!1,touchPitch:!1}),a=new u.$C.Zoom({position:{bottom:"60",left:"10"},slider:!1,zoomLevel:!0}),t.addControl(a),i=new u.DJ("geometryAreaList").addTo(t),(l=new u.DJ("geometryCityList").addTo(t)).hide(),t.on("zoomend",(function(t){t.to>=3&&t.to<8?(l.hide(),i.show()):t.to>=8&&(l.show(),i.hide())})),s={},d={},p={},o.next=12,(0,g.it)("\u57ce\u5e02\u6570\u636e");case 12:return 200===(y=o.sent).status&&(f=y.data,Object.values(f.city).forEach((function(t,n){s[f.province[n]]?(s[f.province[n]].land_count+=f.land_count[n],s[f.province[n]].proj_count+=f.proj_count[n]):s[f.province[n]]={land_count:f.land_count[n],proj_count:f.proj_count[n]},d[f.region[n]]?(d[f.region[n]].land_count+=f.land_count[n],d[f.region[n]].proj_count+=f.proj_count[n]):d[f.region[n]]={land_count:f.land_count[n],proj_count:f.proj_count[n]},p[t]={land_count:f.land_count[n],proj_count:f.proj_count[n]}}))),m=[{city:"\u957f\u6625",area:"\u4e1c\u5317"},{city:"\u5357\u4eac",area:"\u534e\u4e1c"},{city:"\u5317\u4eac",area:"\u534e\u5317"},{city:"\u5409\u6797",area:"\u4e1c\u5317"},{city:"\u5e7f\u5dde",area:"\u534e\u5357"},{city:"\u897f\u5b89",area:"\u897f\u5317"},{city:"\u91cd\u5e86",area:"\u897f\u5357"},{city:"\u6b66\u6c49",area:"\u534e\u4e2d"}],v=[],o.next=18,(0,g.it)("\u57ce\u5e02\u5730\u7406\u6570\u636e");case 18:return 200===(h=o.sent).status&&(b=h.data,Object.values(b.city).forEach((function(n,o){var r=m.find((function(t){return t.city===n}));r&&v.push(w({},r,{lat:b.lat[o],lng:b.lng[o]})),e({name:n,geometry:b.geometry[o],"\u571f\u5730\u6570\u91cf":p[n].land_count,"\u9879\u76ee\u6570\u91cf":p[n].proj_count,lat:b.lat[o],lng:b.lng[o]},l,t)}))),o.next=22,(0,g.it)("\u533a\u57df\u6570\u636e");case 22:if(200===(x=o.sent).status&&(_=x.data,Object.values(_.region).forEach((function(n,o){var r=v.find((function(t){return t.area===n}));e({name:n,geometry:_.geometry[o],"\u571f\u5730\u6570\u91cf":d[n].land_count,"\u9879\u76ee\u6570\u91cf":d[n].proj_count,lat:_.lat[o],lng:_.lng[o],cityLat:null===r||void 0===r?void 0:r.lat,cityLng:null===r||void 0===r?void 0:r.lng,type:"\u533a\u57df"},i,t)}))),j=i.getExtent()){o.next=27;break}return o.abrupt("return");case 27:k=t.getFitZoom(j,!1),z=j.getCenter(),t.setCenterAndZoom({x:z.x-7,y:z.y},k);case 30:case"end":return o.stop()}}),o)})),function(){var t=this,n=arguments;return new Promise((function(e,r){var a=o.apply(t,n);function i(t){h(a,e,r,i,c,"next",t)}function c(t){h(a,e,r,i,c,"throw",t)}i(void 0)}))});return(0,a.jsx)("div",{className:"home-map-cotainer",ref:n})}}}]);